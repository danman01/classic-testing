<h3>Rails - RSPEC and Factory Girl</h3>

<p>Building on last week (using test driven development with Ruby and RSpec
outside of a rails application). The goal this week is to incorporate TDD inside a Rails
application, which entails using <a href="https://github.com/rspec/rspec-rails/">RSpec</a>
and <a href="https://github.com/thoughtbot/factory_girl_rails">Factory Girl Rails</a></p>

<p>What is Factory Girl and what is it's purpose (See
<a href="https://github.com/danman01/classic-testing">last week</a>
for a brief description of RSpec)? Taken from 
<a href="https://github.com/thoughtbot/factory_girl_rails">Factory GirlRails github
page</a>, Factory girl is: </p>

<p><i>a fixtures replacement with a straightforward definition 
syntax, support for multiple build strategies (saved instances, unsaved 
instances, attribute hashes, and stubbed objects), and support for multiple 
factories for the same class (user, admin_user, and so on), 
including factory inheritance.</i>. </p>

</p>Uhhhh..Ok... What if wee are not familiar with fixtures and the
rest of what that description means, then a good place to start is 
[Rails Guides - Testing](http://guides.rubyonrails.org/testing.html), 
(by the way you should read the Rails Guids on testing now if you have not
already done so). What are <i>Fixtures</i>? Taken directly from Rails Guides:</p>

  <p><i>Fixtures is a fancy word for sample data. Fixtures allow you to populate 
  your testing database with predefined data before your tests run. Fixtures 
  are database independent and assume a single format: YAML.</p>

<p>That is a bit more palatable. Back to <i>Factory Girl</i>. What is
Factory Girl in laymans terms (as layman as it gets, maybe)? From the 
makers of <i>Factory Girl</i>:</p>

![GitHub Logo](http://img.skitch.com/20120816-jtqm235n3ubsmgrskdmps33e9q.jpg)


<p>And, from our lovely contributors at Stackoverflow:</p>

![stackoverflow_description](https://img.skitch.com/20120816-e4jjji8dkpicx19c7njkbwuh58.jpg)


***** Discussion Point *****
<p>What are other differences/advantages/disadvantages are there between <i>Factory
Girl</i> and <i>Fixtures</i>?</p>
*****

<p>In order to use RSpec and Factory Girl (both gems) inside a rails a little
setup is required. I'm setting this up using 'Ruby 1.9.2' and 'Rails 3.2.6'</p>

<ol>

<li><b>Gemfile</b>:
<p>Make sure the correct gems are installed for the correct environments (test,
development).</p>

```ruby
group :test, :development do
  gem "rspec-rails", "~> 2.0"
  gem 'factory_girl_rails'
end
```

```RSpec``` needs to be in the ```:development group```.

</li>

<li><b>Update gems in Gemfile</b>: 
    ```bundle install```
</li>

<li> Run ```rails generate rspec:install``` 
  This adds:
  <ul>
    <li>'spec' directory (this is where all the tests and factories will live)<li>
    <li>``spec_helper.rb``` (configurations for RSpec)</li>
    <li>```.rspec``` (configurations for RSpec output to screen, i.e. color)</li>
    <li>"rake spec"</li>
  </ul>
</li>

<li>Now, when you use ```rails generate model <model_name> <column_name><data_type>```
A ```model``` spec will be automatically created in
```spec/models/<model_name>_spec.rb```. Also, a ```factory``` will also be
created at ```spec/factories/<model_name>s.rb. 

Note: If you use a ```generator``` to create your controllers, a ```controller``` 
spec will also be created automatically for you at ```spec/controller/<controller_name>_controller_spec.rb```<li>

Note: If you do NOT use a generator to create your models/controllers, then you
will need to manually create your spec and factory file following the 1) file
location, and 2) file naming conventions that Factory Girl and RSpec are
expecting (Assuming you are using the default setups).
</li>
<li>Now we have setup the rails application sufficiently to be able to run our
first suite of tests.  This can be done by:

```rspec spec/```

This will run all the specs in the ```spec``` directory. 

NOTE: You can run tests for specific directories:

```rspec spec/<directory_name>```

....or for specific files

```rspec spec/models/<spec_file>
</ol>

 
